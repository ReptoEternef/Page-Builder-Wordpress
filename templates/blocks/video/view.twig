<div class="video-block container">
{% if values.video_link is defined and values.video_link %}
  {% set video_id = '' %}

  {# Cas 1: lien avec watch?v= #}
  {% if 'watch?v=' in values.video_link %}
    {% set video_id = values.video_link|split('v=')|last|split('&')|first %}
  {% elseif 'youtu.be/' in values.video_link %}
    {# Cas 2: lien court #}
    {% set video_id = values.video_link|split('/')|last|split('?')|first %}
  {% endif %}

  <iframe width="{{ values.video_width }}" height="{{ values.video_height }}"
    src="https://www.youtube.com/embed/{{ video_id }}"
    title="YouTube video"
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
    allowfullscreen>
  </iframe>
{% else %}
  {{ values.iframe }}
  {% endif %}
</div>




{# SNIPPETS & TIPS

{{ values.field_de_la_classe }} 
{% if values.layout == 'default' %}

#}


{# {% if values is defined %}
  <div class="debug-block" style="background:#111;color:#0f0;padding:1rem;margin:1rem 0;font-family:monospace;font-size:14px;overflow:auto;">
    <strong style="color:#ff0;">DEBUG values :</strong><br>
    <pre>{{ values|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
  </div>
{% else %}
  <div class="debug-block" style="background:#111;color:#f55;padding:1rem;margin:1rem 0;font-family:monospace;font-size:14px;">
    ⚠️ <strong>Pas de variable `values` trouvée ici !</strong>
    <pre>{{ dump(_context) }}</pre>
  </div>
{% endif %}
 #}